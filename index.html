<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>WEBã‚µã‚¤ãƒˆãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚µã‚¤ãƒˆ WEPREVIEWï¼ˆã‚¦ã‚§ãƒƒãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼‰</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      margin: 0;
      padding: 2rem;
      background-color: #f9f9f9;
    }

    h1 {
      margin-bottom: 1.5rem;
      font-size: 1.5rem;
      color: #333;
    }

    label {
      display: block;
      margin-top: 1rem;
      font-weight: bold;
    }

    input, select {
      width: 100%;
      max-width: 500px;
      padding: 0.5rem;
      margin-top: 0.3rem;
      border: 1px solid #ccc;
      border-radius: 5px;
      font-size: 1rem;
    }

    button {
      margin-top: 1.5rem;
      padding: 0.6rem 1.5rem;
      font-size: 1.1rem;
      background: #4a90e2;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }

    button:hover {
      background: #357abd;
    }

    #viewer {
      margin-top: 2rem;
      width: 100%;
      border: 1px solid #ccc;
      border-radius: 8px;
      overflow: hidden;
    }

    iframe {
      width: 100%;
      height: 100%;
      border: none;
      display: block;
    }

    #previewImage {
      width: 100%;
      display: block;
    }

    @media (max-width: 600px) {
      input, select, button {
        width: 100%;
        font-size: 1rem;
      }
    }
  </style>
</head>
<body>

  <h1>WEBã‚µã‚¤ãƒˆãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚µã‚¤ãƒˆ WEPREVIEWï¼ˆã‚¦ã‚§ãƒƒãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼‰</h1>

  <label for="url">ã‚µã‚¤ãƒˆURLï¼ˆhttps://ã‹ã‚‰ï¼‰</label>
  <input type="text" id="url" placeholder="https://example.com">

  <label for="preset">ç«¯æœ«ãƒ—ãƒªã‚»ãƒƒãƒˆ</label>
  <select id="preset" onchange="applyPreset()">
    <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
    <option value="390x844">ğŸ“± iPhone 14 Pro (390Ã—844)</option>
    <option value="768x1024">ğŸ“± iPad (768Ã—1024)</option>
    <option value="1366x768">ğŸ’» ãƒãƒ¼ãƒˆPC (1366Ã—768)</option>
    <option value="1920x1080">ğŸ–¥ï¸ ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ— (1920Ã—1080)</option>
  </select>

  <label for="height">ç¸¦ã®ç”»é¢ã‚µã‚¤ã‚ºï¼ˆpxï¼‰</label>
  <input type="number" id="height" placeholder="ä¾‹: 800">

  <label for="width">æ¨ªã®ç”»é¢ã‚µã‚¤ã‚ºï¼ˆpxï¼‰</label>
  <input type="number" id="width" placeholder="ä¾‹: 1280">

  <p>ã‚µã‚¤ã‚ºè¨ˆæ¸¬ã¯<a href="https://x.gd/ewrwr4">ã“ã¡ã‚‰ã®ã‚µã‚¤ãƒˆ</a>ãŒãŠã™ã™ã‚ã§ã™ï¼ˆåˆ¥ã‚µã‚¤ãƒˆã§ã™ï¼‰</p>

  <div style="margin-top: 1rem;">
    <button onclick="showIframe()">iframeãƒ¢ãƒ¼ãƒ‰</button>
    <button onclick="showImage()">ç”»åƒãƒ¢ãƒ¼ãƒ‰ï¼ˆæ—§ï¼‰</button>
  </div>

  <div id="viewer" style="display:none;">
    <iframe id="frame" src="" sandbox="allow-scripts allow-forms allow-same-origin"></iframe>
    <img id="previewImage" src="" style="display:none;">
  </div>

  <script>
/* =========================
   1ç§’å¾Œã«UIã‚’JSã§ç”Ÿæˆ
========================= */
let cmdLog, badgeBox, startTime;

setTimeout(() => {
  const viewer = document.getElementById("viewer");

  badgeBox = document.createElement("div");
  badgeBox.style.marginBottom = "0.5rem";

  cmdLog = document.createElement("pre");
  cmdLog.style.background = "#000";
  cmdLog.style.color = "#0f0";
  cmdLog.style.padding = "1rem";
  cmdLog.style.borderRadius = "6px";
  cmdLog.style.fontFamily = "Consolas, monospace";
  cmdLog.style.fontSize = "0.85rem";
  cmdLog.style.maxHeight = "220px";
  cmdLog.style.overflow = "auto";

  viewer.parentNode.insertBefore(badgeBox, viewer);
  viewer.parentNode.insertBefore(cmdLog, viewer);
}, 1000);

/* =========================
   ãƒ­ã‚° & é€²æ—ç®¡ç†
========================= */
let totalSteps = 1;
let currentStep = 0;

function startProgress(steps) {
  totalSteps = steps;
  currentStep = 0;
  startTime = performance.now();
  if (cmdLog) cmdLog.textContent = "";
}

function log(msg, type = "info") {
  if (!cmdLog) return;
  const color =
    type === "success" ? "#ff0" :
    type === "error" ? "#f00" :
    "#0f0";
  cmdLog.innerHTML += `<span style="color:${color}">${msg}</span>\n`;
  cmdLog.scrollTop = cmdLog.scrollHeight;
}

function step(msg, ok = true) {
  currentStep++;
  const percent = Math.round((currentStep / totalSteps) * 100);
  const bars = Math.round(percent / 5);
  const bar = "I".repeat(bars) + " ".repeat(20 - bars);
  log(msg, ok ? "success" : "error");
  log(`${percent}% [${bar}]`);
}

function finish() {
  const time = Math.round(performance.now() - startTime);
  log(`å®Œäº† (${time} ms)`, "success");
}

function showBadge(name) {
  if (!badgeBox) return;
  badgeBox.innerHTML =
    `<span style="
      display:inline-block;
      padding:0.3rem 0.7rem;
      background:#4a90e2;
      color:#fff;
      border-radius:12px;
      font-size:0.8rem;
    ">${name}</span>`;
}

/* =========================
   å…¥åŠ›
========================= */
function getInputValues() {
  const url = document.getElementById("url").value.trim();
  const w = parseInt(width.value, 10);
  const h = parseInt(height.value, 10);
  if (!url.startsWith("https://") || isNaN(w) || isNaN(h)) return null;
  return { url, w, h };
}

/* =========================
   åŸ‹ã‚è¾¼ã¿åˆ¤å®š
========================= */
const services = [
  ["Imgur", u => u.hostname.includes("imgur.com") ? `https://i.imgur.com/${u.pathname.split("/").filter(Boolean)[0]}.jpg` : null],
  ["Pornhub", u => u.hostname.includes("pornhub.com") ? `https://www.pornhub.com/embed/${u.searchParams.get("viewkey")}` : null],
  ["Xvideos", u => u.hostname.includes("xvideos.com") ? `https://www.xvideos.com/embedframe/${(u.pathname.match(/video(\d+)/)||[])[1]}` : null],
  ["FC2", u => u.hostname.endsWith("fc2.com") ? `https://video.fc2.com/embed/${u.pathname.split("/").filter(Boolean)[1]}` : null],
  ["Twitch", u => u.hostname.endsWith("twitch.tv") ? `https://player.twitch.tv/?video=${u.pathname.split("/")[2]}&parent=${location.hostname}` : null],
  ["Dailymotion", u => u.hostname.includes("dailymotion.com") ? `https://www.dailymotion.com/embed/video/${(u.pathname.match(/video\/([^_]+)/)||[])[1]}` : null],
  ["Facebook", u => u.hostname.includes("facebook.com") ? `https://www.facebook.com/plugins/video.php?href=${encodeURIComponent(u.href)}` : null],
];

/* =========================
   iframe ãƒ¢ãƒ¼ãƒ‰
========================= */
function showIframe() {
  const vals = getInputValues();
  if (!vals) return;

  startProgress(services.length + 3);
  step("å…¥åŠ›å€¤è£œæ­£ä¸­...");

  const { url, w, h } = vals;
  const u = new URL(url);
  const frame = document.getElementById("frame");
  const img = document.getElementById("previewImage");
  const viewer = document.getElementById("viewer");

  viewer.style.display = "block";
  img.style.display = "none";

  let finalSrc = url;
  let detected = null;

  for (const [name, fn] of services) {
    step(`${name}åˆ¤å®šä¸­...`);
    const r = fn(u);
    if (r && !r.includes("undefined")) {
      detected = name;
      finalSrc = r;
      break;
    }
  }

  step("URLé©ç”¨ä¸­...");
  frame.src = finalSrc;
  frame.style.width = w + "px";
  frame.style.height = h + "px";
  frame.style.display = "block";

  if (detected) showBadge(detected);
  else log("å¯¾å¿œã‚µãƒ¼ãƒ“ã‚¹æœªæ¤œå‡ºï¼ˆé€šå¸¸iframeï¼‰", "error");

  finish();
}
/* =========================
   ãƒãƒ¼ã‚¸ãƒ§ãƒ³ & æ›´æ–°å±¥æ­´
========================= */

// ğŸ”§ ã“ã“ã ã‘ç·¨é›†ã™ã‚Œã°OK
const APP_VERSION = "v2.1.1";

// âœï¸ ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆå±¥æ­´ï¼ˆãƒ†ã‚­ã‚¹ãƒˆã¯è‡ªç”±ã«ç·¨é›†ï¼‰
const UPDATE_HISTORY = [
  {
    version: "v2.1.1",
    date: "2026-01-21",
    text: `
- Twitch åŸ‹ã‚è¾¼ã¿èª¤åˆ¤å®šã‚’ä¿®æ­£
- å¯¾å¿œã‚µãƒ¼ãƒ“ã‚¹åˆ¤å®šãƒ­ã‚¸ãƒƒã‚¯ã‚’å¼·åŒ–
- CMDé¢¨ãƒ­ã‚°ã«é€²æ—ãƒãƒ¼è¿½åŠ 
- ãƒãƒ¼ã‚¸ãƒ§ãƒ³å±¥æ­´è¡¨ç¤ºè¿½åŠ 
`
  },
  {
    version: "v2.1.0",
    date: "2026-01-18",
    text: `
- FC2 / Dailymotion / Facebook å¯¾å¿œ
- å®Ÿè¡Œæ™‚é–“(ms)è¡¨ç¤ºã‚’è¿½åŠ 
`
  },
  {
    version: "v1.0.0",
    date: "2025-08-02",
    text: `
- v.1.0.0ãƒªãƒªãƒ¼ã‚¹
- Vercelã‚’åˆ©ç”¨ã—ã¦Webã‚µã‚¤ãƒˆã‚’å…¬é–‹
`
  }
];

setTimeout(() => {
  const root = document.body;

  /* ===== ãƒãƒ¼ã‚¸ãƒ§ãƒ³è¡¨ç¤º ===== */
  const ver = document.createElement("div");
  ver.textContent = APP_VERSION;
  ver.style.position = "fixed";
  ver.style.top = "8px";
  ver.style.right = "12px";
  ver.style.fontFamily = "Consolas, monospace";
  ver.style.fontSize = "0.75rem";
  ver.style.color = "#aaa";
  ver.style.opacity = "0.8";

  /* ===== æ›´æ–°å±¥æ­´ãƒœã‚¿ãƒ³ ===== */
  const btn = document.createElement("button");
  btn.textContent = "UPDATE LOG";
  btn.style.position = "fixed";
  btn.style.bottom = "12px";
  btn.style.right = "12px";
  btn.style.background = "#000";
  btn.style.color = "#0f0";
  btn.style.border = "1px solid #0f0";
  btn.style.padding = "6px 10px";
  btn.style.fontFamily = "Consolas, monospace";
  btn.style.cursor = "pointer";

  /* ===== æ›´æ–°å±¥æ­´ç”»é¢ ===== */
  const panel = document.createElement("pre");
  panel.style.position = "fixed";
  panel.style.bottom = "50px";
  panel.style.right = "12px";
  panel.style.width = "420px";
  panel.style.maxHeight = "300px";
  panel.style.overflow = "auto";
  panel.style.background = "#000";
  panel.style.color = "#0f0";
  panel.style.border = "1px solid #0f0";
  panel.style.padding = "1rem";
  panel.style.fontFamily = "Consolas, monospace";
  panel.style.fontSize = "0.8rem";
  panel.style.display = "none";

  panel.textContent = UPDATE_HISTORY.map(h =>
`[${h.version}] ${h.date}
${h.text.trim()}
------------------------------
`).join("\n");

  btn.onclick = () => {
    panel.style.display =
      panel.style.display === "none" ? "block" : "none";
  };

  root.appendChild(ver);
  root.appendChild(btn);
  root.appendChild(panel);
}, 1000);
</script>



</body>
</html>







